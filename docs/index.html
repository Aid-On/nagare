<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>🌊 Nagare - High-Performance Stream Processing</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/rxjs@7/dist/bundles/rxjs.umd.min.js"></script>
  <style>
    :root {
      --primary: #0ea5e9;
      --primary-dark: #0284c7;
      --secondary: #06b6d4;
      --accent: #f59e0b;
      --success: #10b981;
      --error: #ef4444;
      --warning: #f59e0b;
      
      --bg: #0f172a;
      --bg-light: #1e293b;
      --bg-lighter: #334155;
      --bg-card: #1e293b;
      --bg-hover: #334155;
      
      --text: #f8fafc;
      --text-dim: #94a3b8;
      --text-muted: #64748b;
      
      --border: #334155;
      --border-light: #475569;
      
      --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      overflow-x: hidden;
    }

    /* Header */
    .header {
      background: linear-gradient(135deg, var(--bg-light) 0%, var(--bg) 100%);
      padding: 2rem 0;
      text-align: center;
      border-bottom: 1px solid var(--border);
      position: relative;
    }

    .header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(circle at 30% 20%, rgba(14, 165, 233, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 70% 80%, rgba(6, 182, 212, 0.1) 0%, transparent 50%);
      pointer-events: none;
    }

    .header-content {
      position: relative;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 2rem;
    }

    .logo {
      font-size: 3.5rem;
      font-weight: 700;
      background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 0.5rem;
    }

    .tagline {
      font-size: 1.25rem;
      color: var(--text-dim);
      margin-bottom: 2rem;
    }

    .header-links {
      display: flex;
      gap: 1rem;
      justify-content: center;
      flex-wrap: wrap;
    }

    .header-link {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 1rem;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 0.5rem;
      text-decoration: none;
      color: var(--text);
      font-weight: 500;
      transition: all 0.2s ease;
    }

    .header-link:hover {
      background: var(--bg-hover);
      border-color: var(--primary);
    }

    /* Navigation */
    .nav {
      background: var(--bg-card);
      border-bottom: 1px solid var(--border);
      padding: 0;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .nav-container {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      overflow-x: auto;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }

    .nav-container::-webkit-scrollbar {
      display: none;
    }

    .nav-tab {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 1rem 1.5rem;
      background: none;
      border: none;
      color: var(--text-dim);
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      white-space: nowrap;
      border-bottom: 2px solid transparent;
    }

    .nav-tab:hover {
      color: var(--text);
      background: var(--bg-hover);
    }

    .nav-tab.active {
      color: var(--primary);
      border-bottom-color: var(--primary);
      background: var(--bg);
    }

    /* Main Content */
    .main {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 2rem;
    }

    .section {
      display: none;
      padding: 2rem 0;
      min-height: 60vh;
    }

    .section.active {
      display: block;
    }

    .section-header {
      text-align: center;
      margin-bottom: 3rem;
    }

    .section-title {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 1rem;
      background: linear-gradient(135deg, var(--text) 0%, var(--text-dim) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .section-subtitle {
      font-size: 1.125rem;
      color: var(--text-dim);
      max-width: 600px;
      margin: 0 auto;
    }

    /* Performance Arena */
    .performance-arena {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 1rem;
      padding: 2rem;
      margin-bottom: 2rem;
    }

    .arena-header {
      text-align: center;
      margin-bottom: 2rem;
    }

    .arena-title {
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
    }

    .benchmark-controls {
      display: flex;
      gap: 1rem;
      justify-content: center;
      margin-bottom: 2rem;
      flex-wrap: wrap;
    }

    .control-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .control-label {
      font-size: 0.875rem;
      color: var(--text-dim);
      font-weight: 500;
    }

    select, .btn {
      padding: 0.75rem 1rem;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 0.5rem;
      color: var(--text);
      font-size: 0.875rem;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    select:hover, .btn:hover {
      border-color: var(--primary);
    }

    select:focus, .btn:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.1);
    }

    .btn {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      border-color: var(--primary);
      color: white;
      font-weight: 500;
      min-width: 120px;
    }

    .btn:hover {
      background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%);
    }

    .btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    /* Results Table */
    .results-table {
      width: 100%;
      border-collapse: collapse;
      background: var(--bg);
      border-radius: 0.75rem;
      overflow: hidden;
      margin-bottom: 2rem;
    }

    .results-table th {
      background: var(--bg-lighter);
      color: var(--text-dim);
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      padding: 1rem;
      text-align: left;
    }

    .results-table td {
      padding: 1rem;
      border-top: 1px solid var(--border);
    }

    .competitor {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-weight: 500;
    }

    .competitor-time {
      font-family: 'Courier New', monospace;
      font-weight: 600;
    }

    .competitor-throughput {
      color: var(--text-dim);
      font-size: 0.875rem;
    }

    .medal {
      padding: 0.25rem 0.5rem;
      border-radius: 0.25rem;
      font-size: 0.75rem;
      font-weight: 600;
    }

    .medal.gold { background: linear-gradient(135deg, #ffd700 0%, #ffed4a 100%); color: #1a202c; }
    .medal.silver { background: linear-gradient(135deg, #c0c0c0 0%, #e2e8f0 100%); color: #1a202c; }
    .medal.bronze { background: linear-gradient(135deg, #cd7f32 0%, #f6ad55 100%); color: #1a202c; }

    /* Performance Summary */
    .performance-summary {
      background: linear-gradient(135deg, var(--success) 0%, var(--primary) 100%);
      color: white;
      padding: 1.5rem;
      border-radius: 0.75rem;
      text-align: center;
      margin-bottom: 2rem;
    }

    .summary-text {
      font-size: 1.125rem;
      font-weight: 600;
    }

    /* Feature Cards */
    .features-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
      margin-top: 2rem;
    }

    .feature-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 1rem;
      padding: 2rem;
      transition: all 0.2s ease;
    }

    .feature-card:hover {
      border-color: var(--primary);
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }

    .feature-icon {
      font-size: 2rem;
      margin-bottom: 1rem;
    }

    .feature-title {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
    }

    .feature-description {
      color: var(--text-dim);
      margin-bottom: 1.5rem;
    }

    .feature-demo {
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 0.5rem;
      padding: 1rem;
      font-family: 'Courier New', monospace;
      font-size: 0.875rem;
      margin-bottom: 1rem;
    }

    .demo-controls {
      display: flex;
      gap: 0.5rem;
    }

    .btn-sm {
      padding: 0.5rem 0.75rem;
      font-size: 0.75rem;
    }

    /* Code Examples */
    .code-example {
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 0.75rem;
      overflow: hidden;
      margin-bottom: 2rem;
    }

    .code-header {
      background: var(--bg-lighter);
      padding: 0.75rem 1rem;
      border-bottom: 1px solid var(--border);
      font-size: 0.875rem;
      font-weight: 500;
      color: var(--text-dim);
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .code-content {
      padding: 1.5rem;
      font-family: 'Courier New', monospace;
      font-size: 0.875rem;
      line-height: 1.6;
      overflow-x: auto;
      display: none;
    }
    .code-example.open .code-content { display: block; }

    /* API Reference */
    .api-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 2rem;
      margin-top: 2rem;
    }

    .api-section {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 0.75rem;
      overflow: hidden;
    }

    .api-header {
      background: var(--bg-lighter);
      padding: 1rem;
      font-size: 1.125rem;
      font-weight: 600;
    }

    .api-methods {
      padding: 1rem;
    }

    .api-method {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.75rem 0;
      border-bottom: 1px solid var(--border);
    }

    .api-method:last-child {
      border-bottom: none;
    }

    .method-name {
      font-family: 'Courier New', monospace;
      font-weight: 500;
      color: var(--primary);
    }

    .method-desc {
      color: var(--text-dim);
      font-size: 0.875rem;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .header-content {
        padding: 0 1rem;
      }

      .logo {
        font-size: 2.5rem;
      }

      .main {
        padding: 0 1rem;
      }

      .section {
        padding: 1rem 0;
      }

      .section-title {
        font-size: 2rem;
      }

      .performance-arena,
      .feature-card {
        padding: 1.5rem;
      }

      .benchmark-controls {
        flex-direction: column;
        align-items: center;
      }
    }

    /* Loading Animation */
    .loading {
      display: inline-block;
      width: 1rem;
      height: 1rem;
      border: 2px solid var(--border);
      border-radius: 50%;
      border-top-color: var(--primary);
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Status Messages */
    .status {
      padding: 0.75rem 1rem;
      border-radius: 0.5rem;
      margin-bottom: 1rem;
      font-size: 0.875rem;
    }

    .status.success {
      background: rgba(16, 185, 129, 0.1);
      border: 1px solid var(--success);
      color: var(--success);
    }

    .status.error {
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid var(--error);
      color: var(--error);
    }

    .status.info {
      background: rgba(14, 165, 233, 0.1);
      border: 1px solid var(--primary);
      color: var(--primary);
    }
  </style>
  <script type="module" crossorigin src="./assets/main-lAbGaMpS.js"></script>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="header-content">
      <h1 class="logo">🌊 NAGARE</h1>
      <p class="tagline">High-Performance Stream Processing for JavaScript</p>
      <div class="header-links">
        <a href="https://github.com/Aid-On/nagare" class="header-link">
          📦 GitHub
        </a>
        <a href="#" class="header-link">
          📖 Documentation
        </a>
        <a href="#" class="header-link">
          🚀 NPM
        </a>
      </div>
    </div>
  </header>

  <!-- Navigation -->
  <nav class="nav">
    <div class="nav-container">
      <button class="nav-tab active" data-section="performance">📊 Performance</button>
      <button class="nav-tab" data-section="features">🔧 Features</button>
      <button class="nav-tab" data-section="examples">🚀 Examples</button>
      <button class="nav-tab" data-section="api">📖 API</button>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="main">
    <!-- Performance Section -->
    <section class="section active" id="performance">
      <div class="section-header">
        <h2 class="section-title">⚡ Streaming Comparison</h2>
        <p class="section-subtitle">
          See how Nagare compares against another popular streaming library. All tests validate outputs for fairness.
        </p>
      </div>

      <div class="performance-arena">
        <div class="arena-header">
          <h3 class="arena-title">🏟️ Benchmark Arena</h3>
          <p>Choose your test and watch the performance battle unfold</p>
        </div>

        <div class="benchmark-controls">
          <div class="control-group">
            <label class="control-label">Test Type</label>
            <select id="testType">
              <option value="mapFilter">Map + Filter</option>
              <option value="complex">Complex Pipeline</option>
              <option value="large">Large Dataset</option>
              <option value="objects">Object Processing</option>
            </select>
          </div>
          <div class="control-group">
            <label class="control-label">Data Size</label>
            <select id="dataSize">
              <option value="10000">10K elements</option>
              <option value="100000" selected>100K elements</option>
              <option value="1000000">1M elements</option>
            </select>
          </div>
          <div class="control-group">
            <label class="control-label">Action</label>
            <button id="runBenchmark" class="btn">🚀 Run Benchmark</button>
          </div>
        </div>

        <table class="results-table" id="resultsTable" style="display: none;">
          <thead>
            <tr>
              <th>Library</th>
              <th>Time</th>
              <th>Throughput</th>
              <th>Rank</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><div class="competitor">🚀 Nagare</div></td>
              <td class="competitor-time" id="nagareTime">-</td>
              <td class="competitor-throughput" id="nagareThroughput">-</td>
              <td><span class="medal" id="nagareMedal">-</span></td>
            </tr>
            <tr>
              <td><div class="competitor">🟨 Reference Lib</div></td>
              <td class="competitor-time" id="rxjsTime">-</td>
              <td class="competitor-throughput" id="rxjsThroughput">-</td>
              <td><span class="medal" id="rxjsMedal">-</span></td>
            </tr>
          </tbody>
        </table>

        <div class="performance-summary" id="performanceSummary" style="display: none;">
          <div class="summary-text" id="summaryText"></div>
        </div>

        <div id="benchmarkStatus"></div>
      </div>
    </section>

    <!-- Features Section -->
    <section class="section" id="features">
      <div class="section-header">
        <h2 class="section-title">🔧 Powerful Features</h2>
        <p class="section-subtitle">
          Explore Nagare's rich feature set with interactive demonstrations.
          Each feature is designed for real-world performance and usability.
        </p>
      </div>

      <div class="features-grid">
        <div class="feature-card">
          <div class="feature-icon">🧮</div>
          <h3 class="feature-title">Aggregates (sum / min / max / mean / find)</h3>
          <p class="feature-description">
            Try Nagare's JIT-optimized aggregates on your own input.
          </p>
          <div class="feature-demo">
            <label>Numbers (comma separated):</label>
            <input id="aggInput" class="input" value="3,1,4,1,5,9,2,6,5" style="width:100%; margin: 0.5rem 0;" />
            <label>Find predicate (JS expr):</label>
            <input id="aggPredicate" class="input" value="x % 2 === 0" style="width:100%; margin: 0.5rem 0;" />
            <div class="demo-controls">
              <button class="btn btn-sm" id="runAggregates">▶ Run</button>
            </div>
            <div style="margin-top:0.5rem">
              Sum: <span id="aggSum">-</span> · Min: <span id="aggMin">-</span> · Max: <span id="aggMax">-</span> · Mean: <span id="aggMean">-</span> · Find: <span id="aggFind">-</span>
            </div>
          </div>
        </div>
        <div class="feature-card">
          <div class="feature-icon">🔄</div>
          <h3 class="feature-title">Stream Transformation</h3>
          <p class="feature-description">
            Transform data streams with map, filter, and reduce operations.
            Optimized for both small and large datasets.
          </p>
          <div class="feature-demo" id="transformDemo">
            Input: [1, 2, 3, 4, 5, 6, 7, 8, 9]<br>
            ↓ .map(x => x * 2)<br>
            [2, 4, 6, 8, 10, 12, 14, 16, 18]<br>
            ↓ .filter(x => x % 3 === 0)<br>
            Output: <span id="transformResult">[6, 12, 18]</span>
          </div>
          <div class="demo-controls">
            <button class="btn btn-sm" id="runTransform">▶ Run Demo</button>
          </div>
        </div>

        <div class="feature-card">
          <div class="feature-icon">⚡</div>
          <h3 class="feature-title">Real-time Processing</h3>
          <p class="feature-description">
            Handle continuous data streams with interval processing.
            Perfect for live data feeds and real-time analytics.
          </p>
          <div class="feature-demo" id="realtimeDemo">
            📡 Stream Status: <span id="streamStatus">Ready</span><br>
            📊 Items Processed: <span id="itemCount">0</span><br>
            🎯 Current Value: <span id="currentValue">-</span><br>
            ⚡ Rate: <span id="processRate">0</span> items/sec
          </div>
          <div class="demo-controls">
            <button class="btn btn-sm" id="startRealtime">▶ Start Stream</button>
            <button class="btn btn-sm" id="stopRealtime">⏹ Stop</button>
          </div>
        </div>

        <div class="feature-card">
          <div class="feature-icon">🔄</div>
          <h3 class="feature-title">Stream Merging</h3>
          <p class="feature-description">
            Combine multiple data sources into unified streams.
            Handles backpressure and synchronization automatically.
          </p>
          <div class="feature-demo" id="mergeDemo">
            Stream A: <span id="streamA">[waiting...]</span><br>
            Stream B: <span id="streamB">[waiting...]</span><br>
            Stream C: <span id="streamC">[waiting...]</span><br>
            ───────────────────────────────<br>
            Merged: <span id="mergedResult">[click to start]</span>
          </div>
          <div class="demo-controls">
            <button class="btn btn-sm" id="runMerge">▶ Merge Demo</button>
          </div>
        </div>

        <div class="feature-card">
          <div class="feature-icon">🛡️</div>
          <h3 class="feature-title">Error Recovery</h3>
          <p class="feature-description">
            Graceful error handling with the rescue operator.
            Keep streams flowing even when individual items fail.
          </p>
          <div class="feature-demo" id="errorDemo">
            Input: <span id="errorInput">[1, "bad", 3, null, 5]</span><br>
            ↓ .rescue(err => 0)<br>
            Output: <span id="errorResult">[1, 0, 3, 0, 5]</span><br>
            <br>
            Status: <span id="errorStatus">✅ 4/5 items recovered</span>
          </div>
          <div class="demo-controls">
            <button class="btn btn-sm" id="runError">▶ Error Demo</button>
          </div>
        </div>

        <div class="feature-card">
          <div class="feature-icon">📊</div>
          <h3 class="feature-title">Window Operations</h3>
          <p class="feature-description">
            Calculate rolling statistics over sliding time windows.
            Essential for time-series analysis and monitoring.
          </p>
          <div class="feature-demo" id="windowDemo">
            Data: <span id="windowData">[1,2,3,4,5,6,7,8,9]</span><br>
            Window Size: <span id="windowSize">3</span><br>
            ──────────────────────────────<br>
            Rolling Avg: <span id="windowResult">[2, 3, 4, 5, 6, 7]</span><br>
            Sparkline: <span id="windowSpark">▂▃▄▅▆▇█</span>
          </div>
          <div class="demo-controls">
            <button class="btn btn-sm" id="runWindow">▶ Window Demo</button>
            <button class="btn btn-sm" id="visualizeWindow">📊 Visualize</button>
          </div>
        </div>

        <div class="feature-card">
          <div class="feature-icon">🔧</div>
          <h3 class="feature-title">Advanced Operators</h3>
          <p class="feature-description">
            Comprehensive set of operators for complex data transformations.
            Scan, take, skip, fork, and more.
          </p>
          <div class="feature-demo" id="operatorDemo">
            .scan((acc, x) => acc + x, 0)<br>
            .take(5)<br>
            .skip(2)<br>
            .fork(x => x % 2 === 0)<br>
            <br>
            Result: <span id="operatorResult">[click to demo]</span>
          </div>
          <div class="demo-controls">
            <button class="btn btn-sm" id="runOperators">▶ Run Demo</button>
          </div>
        </div>

        <div class="feature-card">
          <div class="feature-icon">🧱</div>
          <h3 class="feature-title">concatMapArray (fast path)</h3>
          <p class="feature-description">
            Expand each item to a small, fixed-size array efficiently.
          </p>
          <div class="feature-demo">
            <label>Outer (comma separated):</label>
            <input id="cmaOuter" class="input" value="1,2,3,4" style="width:100%; margin: 0.5rem 0;" />
            <label>Inner length:</label>
            <input id="cmaInner" class="input" type="number" min="0" value="2" style="width:100%; margin: 0.5rem 0;" />
            <div class="demo-controls">
              <button class="btn btn-sm" id="runCMA">▶ Run</button>
            </div>
            <div>Output: <span id="cmaOut">-</span></div>
          </div>
        </div>

        <div class="feature-card">
          <div class="feature-icon">🧬</div>
          <h3 class="feature-title">SIMD / WASM (Float32/64)</h3>
          <p class="feature-description">
            Process typed arrays using WASM kernels (square operation).
          </p>
          <div class="feature-demo">
            <label>Length:</label>
            <input id="simdLen" class="input" type="number" min="1" value="100000" style="width:100%; margin: 0.5rem 0;" />
            <div class="demo-controls">
              <button class="btn btn-sm" id="runSIMD32">▶ Float32 square</button>
              <button class="btn btn-sm" id="runSIMD64">▶ Float64 square</button>
              <button class="btn btn-sm" id="runSIMDCompare">⚖ Compare (JS vs WASM)</button>
            </div>
            <div>Time: <span id="simdTime">-</span> · Sample: <span id="simdSample">-</span></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Examples Section -->
    <section class="section" id="examples">
      <div class="section-header">
        <h2 class="section-title">🚀 Code Examples</h2>
        <p class="section-subtitle">
          Real-world examples you can run and modify. Copy and paste into your projects.
        </p>
      </div>

      <div class="code-example">
        <div class="code-header">Quick Start - Basic Transformation</div>
        <div class="code-content">
<pre>import { Nagare } from '@aid-on/nagare';

// Simple transformation pipeline
const result = await Nagare
  .from([1, 2, 3, 4, 5])
  .map(x => x * 2)
  .filter(x => x > 5)
  .toArray();

console.log(result); // [6, 8, 10]</pre>
        </div>
      </div>

      <div class="code-example">
        <div class="code-header">Advanced Pipeline - Data Processing</div>
        <div class="code-content">
<pre>// Real-world data processing
const processed = await Nagare
  .from(apiResponse.data)
  .filter(item => item.active)
  .map(item => ({
    ...item,
    score: calculateScore(item),
    timestamp: Date.now()
  }))
  .filter(item => item.score > threshold)
  .scan((acc, item) => acc + item.score, 0)
  .toArray();

console.log('Total score:', processed[processed.length - 1]);</pre>
        </div>
      </div>

      <div class="code-example">
        <div class="code-header">Error Handling - Resilient Streams</div>
        <div class="code-content">
<pre>// Handle errors gracefully
const safeResult = await Nagare
  .from(['1', 'invalid', '3', null, '5'])
  .map(x => parseInt(x))
  .rescue(error => {
    console.warn('Parse error:', error);
    return 0; // Default value
  })
  .filter(x => x > 0)
  .toArray();

console.log(safeResult); // [1, 3, 5]</pre>
        </div>
      </div>

      <div class="code-example">
        <div class="code-header">Stream Merging - Multiple Sources</div>
        <div class="code-content">
<pre>// Merge multiple data streams
const stream1 = Nagare.from([1, 3, 5]);
const stream2 = Nagare.from([2, 4, 6]);
const stream3 = Nagare.from([7, 8, 9]);

const merged = await stream1
  .merge(stream2, stream3)
  .filter(x => x % 2 === 0)
  .map(x => x * 10)
  .toArray();

console.log(merged); // [20, 40, 60, 80]</pre>
        </div>
      </div>

      <div class="code-example">
        <div class="code-header">Real-time Stream - Live Processing</div>
        <div class="code-content">
<pre>// Process real-time data
const liveStream = Nagare
  .interval(1000) // Every second
  .map(() => Math.random() * 100)
  .filter(x => x > 50)
  .scan((acc, x) => acc + x, 0)
  .take(10);

// Subscribe to results
liveStream.observe(
  value => console.log('Current total:', value),
  {
    onComplete: () => console.log('Stream completed'),
    onError: err => console.error('Stream error:', err)
  }
);</pre>
        </div>
      </div>
    </section>

    <!-- API Section -->
    <section class="section" id="api">
      <div class="section-header">
        <h2 class="section-title">📖 API Reference</h2>
        <p class="section-subtitle">
          Complete reference for all Nagare methods and operators.
          Everything you need to build powerful stream processing applications.
        </p>
      </div>

      <div class="api-grid">
        <div class="api-section">
          <div class="api-header">🔧 Core Methods</div>
          <div class="api-methods">
            <div class="api-method">
              <div>
                <div class="method-name">from(source)</div>
                <div class="method-desc">Create stream from data</div>
              </div>
            </div>
            <div class="api-method">
              <div>
                <div class="method-name">map(fn)</div>
                <div class="method-desc">Transform each element</div>
              </div>
            </div>
            <div class="api-method">
              <div>
                <div class="method-name">filter(predicate)</div>
                <div class="method-desc">Filter elements</div>
              </div>
            </div>
            <div class="api-method">
              <div>
                <div class="method-name">scan(fn, initial)</div>
                <div class="method-desc">Accumulate values</div>
              </div>
            </div>
            <div class="api-method">
              <div>
                <div class="method-name">take(n)</div>
                <div class="method-desc">Take first n elements</div>
              </div>
            </div>
            <div class="api-method">
              <div>
                <div class="method-name">skip(n)</div>
                <div class="method-desc">Skip first n elements</div>
              </div>
            </div>
          </div>
        </div>

        <div class="api-section">
          <div class="api-header">⚡ Utility Methods</div>
          <div class="api-methods">
            <div class="api-method">
              <div>
                <div class="method-name">toArray()</div>
                <div class="method-desc">Collect to array</div>
              </div>
            </div>
            <div class="api-method">
              <div>
                <div class="method-name">first()</div>
                <div class="method-desc">Get first element</div>
              </div>
            </div>
            <div class="api-method">
              <div>
                <div class="method-name">last()</div>
                <div class="method-desc">Get last element</div>
              </div>
            </div>
            <div class="api-method">
              <div>
                <div class="method-name">count()</div>
                <div class="method-desc">Count elements</div>
              </div>
            </div>
            <div class="api-method">
              <div>
                <div class="method-name">all(predicate)</div>
                <div class="method-desc">Test all elements</div>
              </div>
            </div>
            <div class="api-method">
              <div>
                <div class="method-name">some(predicate)</div>
                <div class="method-desc">Test any element</div>
              </div>
            </div>
          </div>
        </div>

        <div class="api-section">
          <div class="api-header">🔄 Stream Operations</div>
          <div class="api-methods">
            <div class="api-method">
              <div>
                <div class="method-name">merge(...streams)</div>
                <div class="method-desc">Merge streams</div>
              </div>
            </div>
            <div class="api-method">
              <div>
                <div class="method-name">fork(predicate)</div>
                <div class="method-desc">Split into two streams</div>
              </div>
            </div>
            <div class="api-method">
              <div>
                <div class="method-name">observe(callback)</div>
                <div class="method-desc">Subscribe to values</div>
              </div>
            </div>
            <div class="api-method">
              <div>
                <div class="method-name">toReadableStream()</div>
                <div class="method-desc">Convert to ReadableStream</div>
              </div>
            </div>
          </div>
        </div>

        <div class="api-section">
          <div class="api-header">🛡️ Error Handling</div>
          <div class="api-methods">
            <div class="api-method">
              <div>
                <div class="method-name">rescue(handler)</div>
                <div class="method-desc">Error recovery</div>
              </div>
            </div>
            <div class="api-method">
              <div>
                <div class="method-name">terminateOnErrorMode()</div>
                <div class="method-desc">Stop on error</div>
              </div>
            </div>
          </div>
        </div>

        <div class="api-section">
          <div class="api-header">🚀 Advanced Features</div>
          <div class="api-methods">
            <div class="api-method">
              <div>
                <div class="method-name">windowedAggregate(size, op)</div>
                <div class="method-desc">Rolling window operations</div>
              </div>
            </div>
            <div class="api-method">
              <div>
                <div class="method-name">mapWasm(kernel, params)</div>
                <div class="method-desc">WASM acceleration</div>
              </div>
            </div>
          </div>
        </div>

        <div class="api-section">
          <div class="api-header">🏗️ Static Constructors</div>
          <div class="api-methods">
            <div class="api-method">
              <div>
                <div class="method-name">Nagare.from(source)</div>
                <div class="method-desc">Create from source</div>
              </div>
            </div>
            <div class="api-method">
              <div>
                <div class="method-name">Nagare.of(...values)</div>
                <div class="method-desc">Create from values</div>
              </div>
            </div>
            <div class="api-method">
              <div>
                <div class="method-name">Nagare.empty()</div>
                <div class="method-desc">Create empty stream</div>
              </div>
            </div>
            <div class="api-method">
              <div>
                <div class="method-name">Nagare.range(start, end)</div>
                <div class="method-desc">Create number range</div>
              </div>
            </div>
            <div class="api-method">
              <div>
                <div class="method-name">Nagare.interval(ms)</div>
                <div class="method-desc">Create timer stream</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Scripts -->
</body>
</html>
